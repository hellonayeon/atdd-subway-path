# 인수 테스트와 E2E 테스트
## 🚀 3단계 - 지하철 구간 관리
* 지하철 구간 관리 기능에 대한 인수 조건 도출

```
Feature: 구간 등록 기능


    Scenario: 새로운 구간을 등록한다.
        Given: 2개의 지하철역이 등록되어 있다.
        And: 1개의 노선이 등록되어 있다.
        When: 구간을 생성한다.
        Then: 성공(200 OK) 응답을 받는다.
        And: 노선 정보를 응답 받는다.
        And: 새롭게 추가된 마지막 지하철역(하행종점) 아이디를 비교한다.
      
        
    Scenario: 상행역이 노선의 하행 종점역이 아닌 구간을 등록한다.
        Given: 2개의 지하철역이 등록되어 있다.
        And: 1개의 노선이 등록되어 있다.
        When: 상행역이 노선의 하행 종점역이 아닌 구간을 등록한다.
        Then: 실패(400 Bad Request) 응답을 받는다.
        And: '구간의 상행역과 노선의 하행 종점역이 일치하지 않습니다.' 메시지를 응답받는다.
        
        
    Scenario: 하행역이 노선에 등록되어 있는 구간을 등록한다.
        Given: 2개의 지하철역이 등록되어 있다.
        And: 1개의 노선이 등록되어 있다.
        When: 하행역이 노선에 등록되어있는 구간을 등록한다.
        Then: 실패(400 Bad Request) 응답을 받는다.
        And: '구간의 하행역이 노선에 이미 등록되어있습니다.' 메시지를 응답받는다.
```

```
Feature: 구간 제거 기능


    Scenario: 구간을 제거한다.
        Given: 3개의 지하철역이 등록되어 있다.
        And: 1개의 노선이 등록되어 있다.
        And: 2개의 구간이 등록되어 있다.
        When: 구간을 제거한다.
        Then: 성공(200 OK) 응답을 받는다.
        
    
    Scenario: 첫 번째 구간을 삭제한다.
        Given: 3개의 지하철역이 등록되어 있다.
        And: 1개의 지하철 노선이 등록되어 있다.
        And: 2개의 구간이 등록되어 있다.
        When: 첫 번째 구간(상행 종점역)을 삭제한다.
        Then: 실패(400 Bad Request) 응답을 받는다.
        And: '마지막 구간만 삭제할 수 있습니다.' 메시지를 응답받는다.
        
        
    Scenario: 중간 구간을 삭제한다.
        Given: 4개의 지하철역이 등록되어 있다.
        And: 1개의 지하철 노선이 등록되어 있다.
        And: 3개의 구간이 등록되어 있다.
        When: 두 번째 구간(상행 종점역 & 하행 종점역 둘 중 하나라도 속하지 않은 구간)을 삭제한다.
        Then: 실패(400 Bad Request) 응답을 받는다.
        And: '마지막 구간만 삭제할 수 있습니다.' 메시지를 응답받는다.
        
    
    Scenario: 단일 구간으로 이루어진 노선에서 구간을 삭제한다.
        Given: 2개의 지하철역이 등록되어 있다.
        And: 1개의 노선이 등록되어 있다.
        And: 1개의 구간이 등록되어 있다.
        When: 구간을 삭제한다.
        Then: 실패(400 Bad Request) 응답을 받는다.
        And: '단일 구간 노선의 구간은 삭제할 수 없습니다.' 메시지를 응답받는다.
```